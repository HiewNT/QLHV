@{
    ViewData["Title"] = "Danh sách nhân viên HQT";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>@ViewData["Title"]</h2>
    <a asp-action="Create" class="btn btn-primary">
        <i class="bi bi-plus-circle me-1"></i>Thêm nhân viên
    </a>
</div>

@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

<div class="card">
    <div class="card-body">
        <table id="nhanVienTable" class="table table-striped table-bordered align-middle" style="width:100%">
            <thead>
                <tr>
                    <th>Họ và tên</th>
                    <th>Ngày sinh</th>
                    <th>Cấp bậc</th>
                    <th>Chức vụ</th>
                    <th>Đảng viên</th>
                    <th>Trình độ</th>
                    <th>Trường học</th>
                    <th>Qua trường</th>
                    <th>Năm nhập ngũ</th>
                    <th>Ngày vào Đảng chính thức</th>
                    <th>Ngày vào Đảng dự bị</th>
                    <th>Khen thưởng</th>
                    <th>Kỷ luật</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
        </table>
    </div>
</div>

@section Scripts {
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    
    <script>
        $(document).ready(function() {
            $('#nhanVienTable').DataTable({
                "processing": true,
                "serverSide": false,
                "ajax": {
                    "url": "@Url.Action("GetData")",
                    "type": "GET"
                },
                "columns": [
                    { "data": "hoTen" },
                    { "data": "ngaySinh" },
                    { "data": "capBac" },
                    { "data": "chucVu" },
                    { "data": "loaiDangVien" },
                    { "data": "trinhDo" },
                    { "data": "truongHoc" },
                    { "data": "quaTruong" },
                    { "data": "namNhapNgu" },
                    { "data": "ngayVaoDangChinhThuc" },
                    { "data": "ngayVaoDangDuBi" },
                    { 
                        "data": "khenThuong",
                        "render": function(data, type, row) {
                            return '<span class="badge bg-success">' + data + '</span>';
                        }
                    },
                    { 
                        "data": "kyLuat",
                        "render": function(data, type, row) {
                            return '<span class="badge bg-warning">' + data + '</span>';
                        }
                    },
                    {
                        "data": "maNhanVien",
                        "render": function(data, type, row) {
                            return '<div class="btn-group btn-group-sm" role="group">' +
                                '<a href="@Url.Action("Details")/' + data + '" class="btn btn-outline-info" title="Chi tiết">' +
                                '<i class="bi bi-eye"></i></a>' +
                                '<a href="@Url.Action("Edit")/' + data + '" class="btn btn-outline-primary" title="Sửa">' +
                                '<i class="bi bi-pencil"></i></a>' +
                                '<a href="@Url.Action("Delete")/' + data + '" class="btn btn-outline-danger" title="Xóa">' +
                                '<i class="bi bi-trash"></i></a>' +
                                '</div>';
                        },
                        "orderable": false
                    }
                ],
                "language": {
                    "url": "//cdn.datatables.net/plug-ins/1.13.7/i18n/vi.json"
                },
                "pageLength": 25,
                "lengthMenu": [[10, 25, 50, 100, -1], [10, 25, 50, 100, "Tất cả"]],
                "responsive": true,
                "scrollX": true,
                "order": [[0, "asc"]]
            });
        });
    </script>
}

